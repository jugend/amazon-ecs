<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>File: README [amazon-ecs]</title>

	<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet" />

	<script src="./js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>
</head>

<body class="file">
	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="./CHANGELOG.html">CHANGELOG</a></li>
				
					<li class="file"><a href="./README.html">README</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="./images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="./Amazon.html">Amazon</a></li>
				
					<li><a href="./Amazon/Ecs.html">Amazon::Ecs</a></li>
				
					<li><a href="./Amazon/Ecs/Response.html">Amazon::Ecs::Response</a></li>
				
					<li><a href="./Amazon/EcsTest.html">Amazon::EcsTest</a></li>
				
					<li><a href="./Amazon/Element.html">Amazon::Element</a></li>
				
					<li><a href="./Amazon/RequestError.html">Amazon::RequestError</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h2>amazon-ecs</h2>
<p>
Generic Product Advertising Ruby API using Nokogiri. Uses Response and 
Element wrapper classes for easy access to the REST API XML output.
</p>
<p>
It is generic, so you can easily extend <tt>Amazon::Ecs</tt> to support 
other not implemented REST operations; and it is also generic because it
just wraps around Nokogiri element object, instead of providing one-to-one
object/attributes to XML elements map.
</p>
<p>
The idea is as the API evolves, there is a change in REST XML output
structure,  no updates will be required on <tt>amazon-ecs</tt> gem, 
instead you just need to update the element path. 
</p>
<h2>INSTALLATION</h2>
<pre>
  $ gem install amazon-ecs
</pre>
<h2>EXAMPLE</h2>
<pre>
    require 'amazon/ecs'
        
    # set the default options; options will be camelized and converted to REST request parameters.
    Amazon::Ecs.options = {:aWS_access_key_id =&gt; '[your access key]'}

    # to generate signed requests include your secret key:
    Amazon::Ecs.options = {:aWS_access_key_id =&gt; '[your developer token]', :aWS_secret_key =&gt; '[your secret access key]'}

    # alternatively,
    Amazon::Ecs.configure do |options|
        options[:aWS_access_key_id] = '[your access key]'
        options[:aWS_secret_key] = '[you secret key]'
    end

    # options provided on method call will merge with the default options
    res = Amazon::Ecs.item_search('ruby', {:response_group =&gt; 'Medium', :sort =&gt; 'salesrank'})
    
    # search amazon uk
    res = Amazon::Ecs.item_search('ruby', :country =&gt; 'uk')
    
    # some common response object methods
    res.is_valid_request?     # return true if request is valid
    res.has_error?            # return true if there is an error
    res.error                 # return error message if there is any
    res.total_pages           # return total pages
    res.total_results         # return total results
    res.item_page             # return current page no if :item_page option is provided

    # traverse through each item (Amazon::Element)
    res.items.each do |item|
      # retrieve string value using XML path
      item.get('asin')
      item.get('itemattributes/title')

      # return Amazon::Element instance
      item_attributes = item.get_element('itemattributes')
      item_attributes.get('title')
  
      # return first author or a string array of authors
      item_attributes.get('author')          # 'Author 1'
      item_attributes.get_array('author')    # ['Author 1', 'Author 2', ...]
  
      # return an hash of children text values with the element names as the keys
      item.get_hash('smallimage') # {:url =&gt; ..., :width =&gt; ..., :height =&gt; ...}

      # return the first matching path as Amazon::Element
      item_height = item.get_element('itemdimensions/height')
      
      # retrieve attributes from Amazon::Element
      item_height.attributes['units']   # 'hundredths-inches'
      
      # return an array of Amazon::Element
      authors = item.get_elements('author')
  
      # return Nokogiri::XML::NodeSet object or nil if not found
      reviews = item/'editorialreview'
  
      # traverse through Nokogiri elements
      reviews.each do |review|
        # Getting hash value out of Nokogiri element
        Amazon::Element.get_hash(review) # [:source =&gt; ..., :content ==&gt; ...]
    
        # Or to get unescaped HTML values
        Amazon::Element.get_unescaped(review, 'source')
        Amazon::Element.get_unescaped(review, 'content')
        
        # Or this way
        el = Amazon::Element.new(review)
        el.get_unescaped('source')
        el.get_unescaped('content')
      end
    end
    
    # Extend Amazon::Ecs, replace 'other_operation' with the appropriate name
    module Amazon
      class Ecs
        def self.other_operation(item_id, opts={})
          opts[:operation] = '[other valid operation supported by Product Advertising API]'
          
          # setting default option value
          opts[:item_id] = item_id
        
          self.send_request(opts)
        end
      end
    end
    
    Amazon::Ecs.other_operation('[item_id]', :param1 =&gt; 'abc', :param2 =&gt; 'xyz')
</pre>
<p>
Refer to <a href="Amazon.html">Amazon</a> Product Advertising API
documentation for more information  on other valid operations, request
parameters and the XML response output: <a
href="https://affiliate-program.amazon.com/gp/advertising/api/detail/main.html">affiliate-program.amazon.com/gp/advertising/api/detail/main.html</a>
</p>
<p>
To get a sample of <a href="Amazon.html">Amazon</a> REST XML response
output, use AWSZone.com scratch pad: <a
href="http://www.awszone.com/scratchpads/aws/ecs.us/index.aws">www.awszone.com/scratchpads/aws/ecs.us/index.aws</a>
</p>
<h2>SOURCE CODES</h2>
<ul>
<li><p>
<a
href="http://github.com/jugend/amazon-ecs">github.com/jugend/amazon-ecs</a>
</p>
</li>
</ul>
<h2>CREDITS</h2>
<p>
Thanks to Dan Milne (<a href="http://da.nmilne.com/">da.nmilne.com/</a>)
for the signed request patch.
</p>
<h2>LICENSE</h2>
<p>
(The MIT License)
</p>
<p>
Copyright &#169; 2010 Herryanto Siatono, <a
href="http://www.siatono.com">www.siatono.com</a>
</p>

	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>
</body>
</html>

